"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[663],{53663:function(U,b,a){a.d(b,{Z:function(){return F}});var c=a(22786),s=a.n(c),R=a(46299),u=a.n(R),g=a(48651),p=a.n(g),Z=a(86516),I=a.n(Z),P=a(24002),S=a(87033),D=a(13857),j=a(41595),A=a(89362),f=a(55772),B=a(89314),y=a(80821),G=a(15816),E=a(90618),L=a(274),N=a(88748),M=a.n(N),w=a(50552),V=a(53259),$=a(77797),r=a(60771),T=A.Z.Option,W={labelCol:{span:6},wrapperCol:{span:18,offset:"2px"}},C=[{type:1,releaseState:1,configDetail:"testA",releaseTime:"2023-07-29"},{type:1,releaseState:2,configDetail:"testB",releaseTime:"2023-07-29"}],J=function(k){var t=k.isPopup,n=t===void 0?!1:t,h=(0,V.Zl)(S.OE),e=(0,w.useState)(""),z=I()(e,2),K=z[0],Y=z[1],ee=(0,w.useState)(JSON.stringify(C)),H=I()(ee,2),Q=H[0],X=H[1],re=(0,w.useState)(C),q=I()(re,2),ae=q[0],te=q[1],ne=f.Z.useForm(),se=I()(ne,1),oe=se[0],l=(0,j.I)(),le=(0,V.Zl)(S.gs),ie=function(d){var m=d.target.value;try{var v=JSON.parse(m);te(v),Y("");var i=M()(v,{type:"space",size:2});X(i)}catch(O){Y(O.message),X(m)}},ue=function(d){var m,v;return p()(p()({},d),{},{configs:ae,segment:(m=d==null||(v=d.segment)===null||v===void 0?void 0:v.join(","))!==null&&m!==void 0?m:""})},ce=function(){var x=u()(s()().mark(function d(m){var v,i;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,P.Ux)(m);case 3:i=o.sent,(0,D.IY)((i==null||(v=i.data)===null||v===void 0?void 0:v.code)||(i==null?void 0:i.status))&&(h("1"),n?le(!1):$.m8.push("/home")),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),console.log(o.t0);case 10:case"end":return o.stop()}},d,null,[[0,7]])}));return function(m){return x.apply(this,arguments)}}();return(0,r.jsx)(B.ZP,{locale:L.Z,children:(0,r.jsxs)(f.Z,p()(p()({form:oe},W),{},{layout:"horizontal",colon:!1,name:"control-ref",style:{backgroundColor:"#fff",width:"100%",padding:"50px 0 0 50px",border:"2px solid #dfe1e6",position:"relative"},onFinish:function(d){ce(ue(d))},children:[(0,r.jsxs)("div",{style:{padding:"0 160px 0 0"},children:[(0,r.jsx)(f.Z.Item,{name:"componentName",initialValue:"TestComName4",rules:[{required:!0,message:l("componentNameError1")},{validator:function(){var x=u()(s()().mark(function m(v,i){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i&&i.length>50)){o.next=2;break}return o.abrupt("return",Promise.reject(new Error(l("componentNameError2"))));case 2:if(!(i&&!/^[a-z|A-Z]\w{0,49}$/g.test(i))){o.next=4;break}return o.abrupt("return",Promise.reject(new Error(l("componentNameError3"))));case 4:case"end":return o.stop()}},m)}));function d(m,v){return x.apply(this,arguments)}return d}()}],label:(0,r.jsx)("div",{className:"formItem",children:l("componentName")}),children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"version",initialValue:"2.1.1",rules:[{required:!0,message:l("versionError1")},{validator:function(){var x=u()(s()().mark(function m(v,i){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i&&!/^[\d,.]*$/g.test(i))){o.next=2;break}return o.abrupt("return",Promise.reject(new Error(l("versionError2"))));case 2:case"end":return o.stop()}},m)}));function d(m,v){return x.apply(this,arguments)}return d}()}],label:(0,r.jsx)("div",{className:"formItem",children:l("version")}),children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"code",initialValue:"fc1bb8bd13160a410895275e74c3fe2afe207842d0f81b33651d1481edf16eee",rules:[{required:!0,message:l("codeError1")},{validator:function(){var x=u()(s()().mark(function m(v,i){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i&&!/^\w*$/g.test(i))){o.next=2;break}return o.abrupt("return",Promise.reject(new Error(l("codeError2"))));case 2:case"end":return o.stop()}},m)}));function d(m,v){return x.apply(this,arguments)}return d}()}],label:(0,r.jsx)("div",{className:"formItem",children:l("code")}),children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"segment",rules:[{required:!1}],label:(0,r.jsx)("div",{className:"formItem",children:l("segment")}),children:(0,r.jsxs)(A.Z,{mode:"multiple",placeholder:l("segmentTip"),className:"select",children:[(0,r.jsx)(T,{value:"Commercial",children:"Commercial"}),(0,r.jsx)(T,{value:"Consumer",children:"Consumer"}),(0,r.jsx)(T,{value:"CSWTechnicalDebt",children:"CSW - Technical Debt"}),(0,r.jsx)(T,{value:"CSWInnovation",children:"CSW - Innovation"}),(0,r.jsx)(T,{value:"Gaming",children:"Gaming"}),(0,r.jsx)(T,{value:"bEducation",children:"Education"})]})}),(0,r.jsx)(f.Z.Item,{name:"fileUrl",initialValue:"https://artifactory.tc.lenovo.com/artifactory/lenovo-release-generic/1.0.0.31/LenovoSecurityAddin.1.0.0.31.cab",rules:[{required:!0,message:l("fileUrlError")}],label:(0,r.jsx)("div",{className:"formItem",children:l("fileUrl")}),children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"ssrbTicketUrl",initialValue:"https://confluence.tc.lenovo.com/pages/viewpage.action?pageId=673547022",rules:[{required:!0,message:l("ssrbTicketError")}],label:(0,r.jsx)("div",{className:"formItem",children:l("ssrbTicket")}),children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"summary",initialValue:"test",rules:[{required:!1}],label:(0,r.jsx)("div",{className:"formItem",children:l("summary")}),children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"preRelease",initialValue:"preRelease",label:(0,r.jsx)("div",{className:"formItem",children:l("preRelease")}),rules:[{required:!1}],children:(0,r.jsx)(y.Z,{className:"input"})}),(0,r.jsx)(f.Z.Item,{name:"rollbackTag",initialValue:"name:firstTestComName,version:1.1",label:(0,r.jsx)("div",{className:"formItem",children:l("rollbackTag")}),children:(0,r.jsx)(y.Z,{className:"input",placeholder:l("rollbackTagTip")})}),(0,r.jsx)(f.Z.Item,{name:"configs",tooltip:l("configTip"),initialValue:JSON.stringify(C),rules:[{required:Q.length===0,message:l("configError")}],label:(0,r.jsx)("div",{className:"formItem",children:l("configs")}),children:(0,r.jsx)("pre",{children:(0,r.jsxs)("code",{children:[(0,r.jsx)(y.Z.TextArea,{rows:10,name:"configs",value:Q,onChange:ie}),(0,r.jsx)("div",{children:K&&(0,r.jsx)(G.Z.Text,{type:"danger",code:!0,children:K})})]})})})]}),(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginRight:"160px"},children:(0,r.jsx)(E.ZP,{type:"primary",htmlType:"submit",style:{marginBottom:20},children:l("create")})})]}))})},F=J},24002:function(U,b,a){a.d(b,{gB:function(){return W},v7:function(){return J},WF:function(){return M},_H:function(){return V},$j:function(){return B},xI:function(){return L},DL:function(){return A},Ux:function(){return G}});var c=a(22786),s=a.n(c),R=a(46299),u=a.n(R),g=a(13857),p=a(4492),Z=a(18172),I="http://10.176.122.178:8080/automation-release-dashboard",P="https://tools.naea1.uds-dev.lenovo.com/tcs/automation/release/",S=1e4,D=Z.Z.create({baseURL:P,headers:{}});D.defaults.timeout=S,D.interceptors.response.use(function(t){var n=t.data;return(0,g.eF)(n==null?void 0:n.code),n},function(t){var n=t.response;if(n&&n.status){var h;p.ZP.error((h=n.status)!==null&&h!==void 0?h:"error")}else n||p.ZP.error("network connect/request error");return Promise.reject(n)});var j=D;function A(t){return f.apply(this,arguments)}function f(){return f=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.get("/automation-release-dashboard/search",{params:n}));case 1:case"end":return e.stop()}},t)})),f.apply(this,arguments)}function B(t){return y.apply(this,arguments)}function y(){return y=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.get("/automation-release-dashboard/dashboard",{params:n}));case 1:case"end":return e.stop()}},t)})),y.apply(this,arguments)}function G(t){return E.apply(this,arguments)}function E(){return E=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.post("/automation-release-dashboard/request",n));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function L(t){return N.apply(this,arguments)}function N(){return N=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.get("/automation-release-dashboard/detail",{params:n}));case 1:case"end":return e.stop()}},t)})),N.apply(this,arguments)}function M(t){return w.apply(this,arguments)}function w(){return w=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.post("/automation-release-dashboard/comment/create",n));case 1:case"end":return e.stop()}},t)})),w.apply(this,arguments)}function V(t){return $.apply(this,arguments)}function $(){return $=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.delete("/automation-release-dashboard/comment/delete",{params:n}));case 1:case"end":return e.stop()}},t)})),$.apply(this,arguments)}function r(t){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function t(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",axiosIns.post("/automation-release-dashboard/rollback",n));case 1:case"end":return e.stop()}},t)})),T.apply(this,arguments)}function W(t){return C.apply(this,arguments)}function C(){return C=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.put("/automation-release-dashboard/approve",n,{params:{requestTag:n.requestTag,approver:n.approver}}));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}function J(t){return F.apply(this,arguments)}function F(){return F=u()(s()().mark(function t(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.put("/automation-release-dashboard/preTest",n,{params:{requestTag:n.requestTag}}));case 1:case"end":return e.stop()}},t)})),F.apply(this,arguments)}function _(t){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function t(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",axiosIns.put("/automation-release-dashboard/postTest",n,{params:{requestTag:n.requestTag}}));case 1:case"end":return e.stop()}},t)})),k.apply(this,arguments)}},87033:function(U,b,a){a.d(b,{Ab:function(){return P},Iv:function(){return Z},OE:function(){return s},gs:function(){return R},kc:function(){return g},px:function(){return p},qV:function(){return u},u7:function(){return I},yR:function(){return S}});var c=a(53259),s=(0,c.cn)({key:"pageCurrentReoil",default:"1"}),R=(0,c.cn)({key:"showCreatePopupReoil",default:!1}),u=(0,c.cn)({key:"showRollbackPopupReoil",default:!1}),g=(0,c.cn)({key:"showDetailPanelReoil",default:!1}),p=(0,c.cn)({key:"rollbackDisableReoil",default:!1}),Z=(0,c.cn)({key:"detailDataReoil",default:void 0}),I=(0,c.cn)({key:"requestTagRecoil",default:void 0}),P=(0,c.cn)({key:"roleReoil",default:void 0}),S=(0,c.cn)({key:"commentDataReoil",default:void 0})},13857:function(U,b,a){a.d(b,{IY:function(){return u},eF:function(){return R}});var c=a(4492),s={403:"\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002",404:"\u53D1\u51FA\u7684\u8BF7\u6C42\u9488\u5BF9\u7684\u662F\u4E0D\u5B58\u5728\u7684\u8BB0\u5F55\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u64CD\u4F5C\u3002",410:"\u767B\u5F55\u4FE1\u606F\u9519\u8BEF",411:"\u8BF7\u91CD\u65B0\u767B\u5F55",412:"\u65E0\u6CD5\u83B7\u53D6\u7528\u6237\u4FE1\u606F",413:"\u9A8C\u8BC1\u7801\u9519\u8BEF",414:"\u8BF7\u8FDB\u884C\u9A8C\u8BC1\u7801\u767B\u5F55",415:"\u6ED1\u5757\u9A8C\u8BC1\u9519\u8BEF",420:"Data format error",421:"\u7F3A\u5C11\u53C2\u6570",423:"\u7528\u6237\u586B\u5199\u6570\u636E\u9519\u8BEF",430:"InvalidOperation failed",460:"\u975E\u6CD5\u64CD\u4F5C",463:"\u8BF7\u6C42\u9891\u7E41",500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u3002",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"};function R(g){if(g=="200"||!g)c.ZP.success("success!");else{var p;c.ZP.error((p=s[g])!==null&&p!==void 0?p:"error")}}function u(g){return g=="200"||!g}},41595:function(U,b,a){a.d(b,{I:function(){return s}});var c=a(77797);function s(){var R=(0,c.YB)(),u=function(p){return R.formatMessage({id:p,defaultMessage:p})};return u}}}]);
